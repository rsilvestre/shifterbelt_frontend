{"version":3,"sources":["../../../src/config/passport/twitter.js"],"names":[],"mappings":";;;;;;;AAKA,IAAI,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACnC,IAAI,eAAe,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC,QAAQ,CAAC;AAC3D,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC/B,IAAI,IAAI,GAAG,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;;;;;;AAMlC,MAAM,CAAC,OAAO,GAAG,IAAI,eAAe,CAAC;AACjC,aAAW,EAAE,MAAM,CAAC,OAAO,CAAC,QAAQ;AACpC,gBAAc,EAAE,MAAM,CAAC,OAAO,CAAC,YAAY;AAC3C,aAAW,EAAE,MAAM,CAAC,OAAO,CAAC,WAAW;CACxC,EACD,UAAS,WAAW,EAAE,YAAY,EAAE,OAAO,EAAE,IAAI,EAAE;AACjD,MAAI,OAAO,GAAG;AACZ,YAAQ,EAAE,EAAE,YAAY,EAAE,OAAO,CAAC,EAAE,EAAE;GACvC,CAAC;AACF,MAAI,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,GAAG,EAAE,IAAI,EAAE;AACtC,QAAI,GAAG,EAAE,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC;AAC1B,QAAI,CAAC,IAAI,EAAE;AACT,UAAI,GAAG,IAAI,IAAI,CAAC;AACd,YAAI,EAAE,OAAO,CAAC,WAAW;AACzB,gBAAQ,EAAE,OAAO,CAAC,QAAQ;AAC1B,gBAAQ,EAAE,SAAS;AACnB,eAAO,EAAE,OAAO,CAAC,KAAK;OACvB,CAAC,CAAC;AACH,UAAI,CAAC,IAAI,CAAC,UAAU,GAAG,EAAE;AACvB,YAAI,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAC1B,eAAO,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;OACxB,CAAC,CAAC;KACJ,MAAM;AACL,aAAO,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;KACxB;GACF,CAAC,CAAC;CACJ,CACF,CAAC","file":"twitter.js","sourcesContent":["\n/**\n * Module dependencies.\n */\n\nvar mongoose = require('mongoose');\nvar TwitterStrategy = require('passport-twitter').Strategy;\nvar config = require('config');\nvar User = mongoose.model('User');\n\n/**\n * Expose\n */\n\nmodule.exports = new TwitterStrategy({\n    consumerKey: config.twitter.clientID,\n    consumerSecret: config.twitter.clientSecret,\n    callbackURL: config.twitter.callbackURL\n  },\n  function(accessToken, refreshToken, profile, done) {\n    var options = {\n      criteria: { 'twitter.id': profile.id }\n    };\n    User.load(options, function (err, user) {\n      if (err) return done(err);\n      if (!user) {\n        user = new User({\n          name: profile.displayName,\n          username: profile.username,\n          provider: 'twitter',\n          twitter: profile._json\n        });\n        user.save(function (err) {\n          if (err) console.log(err);\n          return done(err, user);\n        });\n      } else {\n        return done(err, user);\n      }\n    });\n  }\n);\n"]}