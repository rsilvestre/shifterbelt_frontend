{"version":3,"sources":["../../../src/config/passport/linkedin.js"],"names":[],"mappings":";;;;;;;AAKA,IAAI,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACnC,IAAI,gBAAgB,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC,QAAQ,CAAC;AAC7D,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC/B,IAAI,IAAI,GAAG,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;;;;;;AAMlC,MAAM,CAAC,OAAO,GAAG,IAAI,gBAAgB,CAAC;AAClC,aAAW,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ;AACrC,gBAAc,EAAE,MAAM,CAAC,QAAQ,CAAC,YAAY;AAC5C,aAAW,EAAE,MAAM,CAAC,QAAQ,CAAC,WAAW;AACxC,eAAa,EAAE,CAAC,IAAI,EAAE,YAAY,EAAE,WAAW,EAAE,eAAe,CAAC;CAClE,EACD,UAAS,WAAW,EAAE,YAAY,EAAE,OAAO,EAAE,IAAI,EAAE;AACjD,MAAI,OAAO,GAAG;AACZ,YAAQ,EAAE,EAAE,aAAa,EAAE,OAAO,CAAC,EAAE,EAAE;GACxC,CAAC;AACF,MAAI,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,GAAG,EAAE,IAAI,EAAE;AACtC,QAAI,GAAG,EAAE,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC;AAC1B,QAAI,CAAC,IAAI,EAAE;AACT,UAAI,GAAG,IAAI,IAAI,CAAC;AACd,YAAI,EAAE,OAAO,CAAC,WAAW;AACzB,aAAK,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK;AAC9B,gBAAQ,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK;AACjC,gBAAQ,EAAE,UAAU;AACpB,gBAAQ,EAAE,OAAO,CAAC,KAAK;OACxB,CAAC,CAAC;AACH,UAAI,CAAC,IAAI,CAAC,UAAU,GAAG,EAAE;AACvB,YAAI,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAC1B,eAAO,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;OACxB,CAAC,CAAC;KACJ,MAAM;AACL,aAAO,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;KACxB;GACF,CAAC,CAAC;CACJ,CACF,CAAC","file":"linkedin.js","sourcesContent":["\n/**\n * Module dependencies.\n */\n\nvar mongoose = require('mongoose');\nvar LinkedinStrategy = require('passport-linkedin').Strategy;\nvar config = require('config');\nvar User = mongoose.model('User');\n\n/**\n * Expose\n */\n\nmodule.exports = new LinkedinStrategy({\n    consumerKey: config.linkedin.clientID,\n    consumerSecret: config.linkedin.clientSecret,\n    callbackURL: config.linkedin.callbackURL,\n    profileFields: ['id', 'first-name', 'last-name', 'email-address']\n  },\n  function(accessToken, refreshToken, profile, done) {\n    var options = {\n      criteria: { 'linkedin.id': profile.id }\n    };\n    User.load(options, function (err, user) {\n      if (err) return done(err);\n      if (!user) {\n        user = new User({\n          name: profile.displayName,\n          email: profile.emails[0].value,\n          username: profile.emails[0].value,\n          provider: 'linkedin',\n          linkedin: profile._json\n        });\n        user.save(function (err) {\n          if (err) console.log(err);\n          return done(err, user);\n        });\n      } else {\n        return done(err, user);\n      }\n    });\n  }\n);\n"]}