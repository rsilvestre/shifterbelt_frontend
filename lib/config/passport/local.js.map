{"version":3,"sources":["../../../src/config/passport/local.js"],"names":[],"mappings":";;;;;;;AAKA,IAAI,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACnC,IAAI,aAAa,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC,QAAQ,CAAC;AACvD,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC/B,IAAI,IAAI,GAAG,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;;;;;;AAMlC,MAAM,CAAC,OAAO,GAAG,IAAI,aAAa,CAAC;AAC/B,eAAa,EAAE,OAAO;AACtB,eAAa,EAAE,UAAU;CAC1B,EACD,UAAS,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE;AAC9B,MAAI,OAAO,GAAG;AACZ,YAAQ,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE;AAC1B,UAAM,EAAE,0CAA0C;GACnD,CAAC;AACF,MAAI,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,GAAG,EAAE,IAAI,EAAE;AACtC,QAAI,GAAG,EAAE,OAAO,IAAI,CAAC,GAAG,CAAC,CAAA;AACzB,QAAI,CAAC,IAAI,EAAE;AACT,aAAO,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,OAAO,EAAE,cAAc,EAAE,CAAC,CAAC;KACvD;AACD,QAAI,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,EAAE;AAChC,aAAO,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,OAAO,EAAE,kBAAkB,EAAE,CAAC,CAAC;KAC3D;AACD,WAAO,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;GACzB,CAAC,CAAC;CACJ,CACF,CAAC","file":"local.js","sourcesContent":["\n/**\n * Module dependencies.\n */\n\nvar mongoose = require('mongoose');\nvar LocalStrategy = require('passport-local').Strategy;\nvar config = require('config');\nvar User = mongoose.model('User');\n\n/**\n * Expose\n */\n\nmodule.exports = new LocalStrategy({\n    usernameField: 'email',\n    passwordField: 'password'\n  },\n  function(email, password, done) {\n    var options = {\n      criteria: { email: email },\n      select: 'name username email hashed_password salt'\n    };\n    User.load(options, function (err, user) {\n      if (err) return done(err)\n      if (!user) {\n        return done(null, false, { message: 'Unknown user' });\n      }\n      if (!user.authenticate(password)) {\n        return done(null, false, { message: 'Invalid password' });\n      }\n      return done(null, user);\n    });\n  }\n);\n"]}