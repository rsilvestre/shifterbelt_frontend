{"version":3,"sources":["../../../src/config/passport/github.js"],"names":[],"mappings":";;;;;;;AAKA,IAAI,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACnC,IAAI,cAAc,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC,QAAQ,CAAC;AACzD,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC/B,IAAI,IAAI,GAAG,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;;;;;;AAMlC,MAAM,CAAC,OAAO,GAAG,IAAI,cAAc,CAAC;AAChC,UAAQ,EAAE,MAAM,CAAC,MAAM,CAAC,QAAQ;AAChC,cAAY,EAAE,MAAM,CAAC,MAAM,CAAC,YAAY;AACxC,aAAW,EAAE,MAAM,CAAC,MAAM,CAAC,WAAW;CACvC,EACD,UAAS,WAAW,EAAE,YAAY,EAAE,OAAO,EAAE,IAAI,EAAE;AACjD,MAAI,OAAO,GAAG;AACZ,YAAQ,EAAE,EAAE,WAAW,EAAE,OAAO,CAAC,EAAE,EAAE;GACtC,CAAC;AACF,MAAI,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,GAAG,EAAE,IAAI,EAAE;AACtC,QAAI,GAAG,EAAE,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC;AAC1B,QAAI,CAAC,IAAI,EAAE;AACT,UAAI,GAAG,IAAI,IAAI,CAAC;AACd,YAAI,EAAE,OAAO,CAAC,WAAW;AACzB,aAAK,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK;AAC9B,gBAAQ,EAAE,OAAO,CAAC,QAAQ;AAC1B,gBAAQ,EAAE,QAAQ;AAClB,cAAM,EAAE,OAAO,CAAC,KAAK;OACtB,CAAC,CAAC;AACH,UAAI,CAAC,IAAI,CAAC,UAAU,GAAG,EAAE;AACvB,YAAI,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAC1B,eAAO,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;OACxB,CAAC,CAAC;KACJ,MAAM;AACL,aAAO,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;KACxB;GACF,CAAC,CAAC;CACJ,CACF,CAAC","file":"github.js","sourcesContent":["\n/**\n * Module dependencies.\n */\n\nvar mongoose = require('mongoose');\nvar GithubStrategy = require('passport-github').Strategy;\nvar config = require('config');\nvar User = mongoose.model('User');\n\n/**\n * Expose\n */\n\nmodule.exports = new GithubStrategy({\n    clientID: config.github.clientID,\n    clientSecret: config.github.clientSecret,\n    callbackURL: config.github.callbackURL\n  },\n  function(accessToken, refreshToken, profile, done) {\n    var options = {\n      criteria: { 'github.id': profile.id }\n    };\n    User.load(options, function (err, user) {\n      if (err) return done(err);\n      if (!user) {\n        user = new User({\n          name: profile.displayName,\n          email: profile.emails[0].value,\n          username: profile.username,\n          provider: 'github',\n          github: profile._json\n        });\n        user.save(function (err) {\n          if (err) console.log(err);\n          return done(err, user);\n        });\n      } else {\n        return done(err, user);\n      }\n    });\n  }\n);\n"]}