{"version":3,"sources":["../../src/lib/utils.js"],"names":[],"mappings":";;;;;;;;;;;AASA,OAAO,CAAC,MAAM,GAAG,UAAU,MAAM,EAAE;AACjC,MAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAC/B,MAAI,IAAI,GAAG,EAAE,CAAC;;;AAGd,MAAI,CAAC,IAAI,EAAE;AACT,WAAO,CAAC,0BAA0B,CAAC,CAAA;GACpC;;AAED,MAAI,CAAC,OAAO,CAAC,UAAU,GAAG,EAAE;AAC1B,QAAI,MAAM,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,CAAA;GAChD,CAAC,CAAC;;AAEH,SAAO,IAAI,CAAA;CACZ,CAAC;;;;;;;;;;;AAWF,OAAO,CAAC,OAAO,GAAG,UAAU,GAAG,EAAE,GAAG,EAAE;AACpC,MAAI,KAAK,GAAG,CAAC,CAAC,CAAC;AACf,MAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;;AAE5B,MAAI,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,UAAU,GAAG,EAAE,GAAG,EAAE;;AAE1C,QAAI,OAAO,GAAG,CAAC,CAAC;;;AAGhB,SAAK,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;AACzC,UAAI,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE;AACjC,eAAO,EAAE,CAAC;;;AAGV,YAAI,OAAO,KAAK,IAAI,CAAC,MAAM,EAAE;AAC3B,eAAK,GAAG,GAAG,CAAC;AACZ,iBAAO,GAAG,CAAC;SACZ;OACF;KACF;GACF,CAAC,CAAC;AACH,SAAO,KAAK,CAAC;CACd,CAAC;;;;;;;;;;;;AAYF,OAAO,CAAC,WAAW,GAAG,UAAU,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE;AAC5C,MAAI,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AACtC,MAAI,CAAC,KAAK,IAAI,OAAO,EAAE,KAAK,UAAU,EAAE;AACtC,WAAO,EAAE,CAAC,SAAS,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC,CAAA;GACjC,MAAM,IAAI,CAAC,KAAK,IAAI,CAAC,EAAE,EAAE;AACxB,WAAO,GAAG,CAAC,KAAK,CAAC,CAAA;GAClB,MAAM,IAAI,EAAC,CAAC,KAAK,IAAI,OAAO,EAAE,KAAK,UAAU,EAAE;AAC9C,WAAO,EAAE,CAAC,WAAW,CAAC,CAAA;GACvB;;AAAA,CAEF,CAAC","file":"utils.js","sourcesContent":["\n/**\n * Formats mongoose errors into proper array\n *\n * @param {Array} errors\n * @return {Array}\n * @api public\n */\n\nexports.errors = function (errors) {\n  var keys = Object.keys(errors);\n  var errs = [];\n\n  // if there is no validation error, just display a generic error\n  if (!keys) {\n    return ['Oops! There was an error']\n  }\n\n  keys.forEach(function (key) {\n    if (errors[key]) errs.push(errors[key].message)\n  });\n\n  return errs\n};\n\n/**\n * Index of object within an array\n *\n * @param {Array} arr\n * @param {Object} obj\n * @return {Number}\n * @api public\n */\n\nexports.indexof = function (arr, obj) {\n  var index = -1; // not found initially\n  var keys = Object.keys(obj);\n  // filter the collection with the given criterias\n  var result = arr.filter(function (doc, idx) {\n    // keep a counter of matched key/value pairs\n    var matched = 0;\n\n    // loop over criteria\n    for (var i = keys.length - 1; i >= 0; i--) {\n      if (doc[keys[i]] === obj[keys[i]]) {\n        matched++;\n\n        // check if all the criterias are matched\n        if (matched === keys.length) {\n          index = idx;\n          return idx;\n        }\n      }\n    }\n  });\n  return index;\n};\n\n/**\n * Find object in an array of objects that matches a condition\n *\n * @param {Array} arr\n * @param {Object} obj\n * @param {Function} cb - optional\n * @return {Object}\n * @api public\n */\n\nexports.findByParam = function (arr, obj, cb) {\n  var index = exports.indexof(arr, obj);\n  if (~index && typeof cb === 'function') {\n    return cb(undefined, arr[index])\n  } else if (~index && !cb) {\n    return arr[index]\n  } else if (!~index && typeof cb === 'function') {\n    return cb('not found')\n  }\n  // else undefined is returned\n};\n"]}